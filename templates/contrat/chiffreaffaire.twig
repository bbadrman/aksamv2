{% extends 'base.html.twig' %}

{% block title %}Statistiques des contrats du mois
{% endblock %}

{% block body %}
	{% for label,  messages in app.flashes  %}
		<div class="container">
			<div class="alert alert-{{ label }}">
				{% for message in messages %}
					{{ message | raw }}
				{% endfor %}

			</div>
		</div>
	{% endfor %}
	{% for message in app.flashes('warning') %}
		<div class="alert alert-warning">
			{{ message }}
		</div>
	{% endfor %}
	<div class="row mt">
		<div class="col-lg-12">
			<div class="content-panel">
				<section class="content-header">

					<h1 style="text-align: center;">Chiffres d'Affaires du Mois
					</h1>


					<div style="text-align: right;">

						<button type="button" type="button" class="btn btn-theme">
							<a href="#">CHERCHER PAR CALENDRIER</a>
						</button>
					</div>

					<ol class="breadcrumb">
						<li>
							<a href="{{ path('app_home') }}">
								<i class="fa fa-dashboard"></i>
								Tableau de bord</a>
						</li>
					</ol>
				</section>


				<hr>
				<table id="table-datatables" class="display">
					<thead>
						<tr>
							<th>Commercial</th>
							<th>Nom
							</th>
							<th>
								frais</th>
						</tr>
					</thead>
					<tbody>
						{% for username, contrats in groupedContrats %}
							{% set showUser = true %}
							{% for contrat in contrats %}
								<tr>
									{% if showUser %}
										<td rowspan="{{ contrats|length }}">
											<strong>{{ username }}</strong>
										</td>
										{% set showUser = false %}
									{% endif %}
									<td>{{ contrat.nom }}</td>
									<td>{{ contrat.frais|number_format(2, ',', ' ') }}
										â‚¬</td>
								</tr>
							{% endfor %}
						{% endfor %}
					</tbody>

				</table>

			</div>
		</div>
	</div>
</div>{% endblock %}{% block javascripts %}
{{ parent() }}<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src='/js/tabledata.js'></script>{% endblock %}
