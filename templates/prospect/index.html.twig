{% extends 'base.html.twig' %}

{% block title %}Prospect index
{% endblock %}

{% block body %}
	{% for label,  messages in app.flashes  %}
		<div class="container">
			<div class="alert alert-{{ label }}">
				{% for message in messages %}
					{{ message | raw }}
				{% endfor %}

			</div>
		</div>
	{% endfor %}
	<section class="content-header">
		<h1>
			Prospects
			<small>Gestion</small>
		</h1>
		<ol class="breadcrumb">
			<li>
				<a href="{{ path('app_home') }}">
					<i class="fa fa-dashboard"></i>
					Tableau de bord</a>
			</li>
			<li class="active">
				<a href="{{ path('app_prospect_index') }}">
					<i class="fa fa-users"></i>
					Tous les prospects</a>
			</li>
		</ol>
		<br>
		<a href="{{ path('app_prospect_new') }}" class="btn btn-primary">Ajouter prospect</a>
	</section>

	<div class="row mt">
		<div class="col-lg-12">
			<div class="content-panel">
				<table class="table table-striped table-advance table-hover">
					<thead>
						<tr>
							<th>Source</th>
							<th>Activité</th>
							<th>Type Prospect</th>
							<th>Date Creation</th>
							<th>Nom</th>
							<th>Prenom</th>
							<th>Raison Sociale</th>
							<th>Téléphone</th>
							<th>Email</th>
							<th>relance</th>
							<th>actions</th>
						</tr>
					</thead>
					<tbody>
						{% for prospect in prospects %}
							<tr>
								<td>{{ prospect.source }}</td>
								<td>{{ prospect.activites }}</td>
								<td>{{ prospect.typeProspect }}</td>
								<td>{{ prospect.creatAt ? prospect.creatAt|date('Y-m-d H') : '' }}</td>

								<td>{{ prospect.nom }}</td>
								<td>{{ prospect.prenom }}</td>
								<td>{{ prospect.raisonSociale }}</td>

								<td>{{ prospect.phone }}</td>
								<td>{{ prospect.email }}</td>
								<td>{{ prospect.relance }}</td>
								<td class="btn-toolbar">
									<a href="{{ path('app_prospect_show', {'id': prospect.id}) }}" class="btn btn-info btn-xs">
										<i class="fa fa-eye"></i>
									</a>

									{{ render(controller('App\\Controller\\ProspectController::relance',{'id':prospect.id}))}}


									{{ render(controller('App\\Controller\\ProspectController::affect',{'id':prospect.id}))}}


									{% if is_granted('ROLE_ADMIN') == true %}
										<a href="{{ path('app_prospect_edit', {'id': prospect.id}) }}" class="btn btn-primary btn-xs">
											<i class="fa fa-pencil"></i>
										</a>

										{% set form_title = '<i class="fa fa-trash"></i>' %}
										{{ include('prospect/_delete_form.html.twig', {
                                                    'form_title': form_title
                                                                           }) }}
									{% endif %}
								</td>
							</tr>

						{% else %}
							<tr>
								<td colspan="23">no records found</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	{{ parent() }}
	{{ encore_entry_script_tags('appaffct') }}

{% endblock %}
